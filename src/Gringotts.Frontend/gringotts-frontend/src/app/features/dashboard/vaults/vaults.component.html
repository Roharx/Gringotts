<div class="vaults-wrapper">
  <!-- Logout and Key Name -->
  <button class="logout-button" (click)="logout()">Leave Vault</button>
  <div class="key-name">{{ keyName }}</div>

  <!-- ADMIN FEATURE TOGGLER -->
  <div style="margin-top: 2rem;">
    <h2 style="font-size: 1.5rem;">Admin Controls</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1rem;">
      <div *ngFor="let key of adminFeatureToggleKeys()">
        <label>
          <input type="checkbox" [(ngModel)]="adminFeatureToggles[key]" (change)="toggleFeature(key)">
          {{ key }}
        </label>
      </div>
    </div>
  </div>


  <!-- Candle swarm -->
  <div class="candle-swarm">
    <app-candle
      *ngFor="let c of candles"
      [height]="c.height"
      [flameWidth]="c.flameWidth"
      [flameHeight]="c.flameHeight"
      [delay]="c.delay"
      [flameDelay]="c.flameDelay"
    ></app-candle>
  </div>

  <h1>Gringotts Vault</h1>

  <!-- Nav: Key Details & Transfer -->
  <div class="nav-buttons">
    <app-sweep-button (clicked)="goToAccount()">Key Details</app-sweep-button>
    <app-sweep-button (clicked)="goToTransfer()">Transfer Coins</app-sweep-button>
  </div>

  <!-- Vault cards with Convert button -->
  <div class="vault-list">
    <div class="vault-card" *ngFor="let v of vaults">
      <div class="icon">{{ v.icon }}</div>
      <div class="details">
        <div class="label">{{ v.label }}</div>
        <div class="amount">{{ v.amount | number }} {{ v.currency }}</div>
      </div>
      <app-sweep-button
        class="convert-button"
        (clicked)="openConversion(v)"
      >
        Convert
      </app-sweep-button>
      <app-sweep-button
        class="give-myself-button"
        (click)="giveMyselfMoney(v.currency)"
      >
        Add {{ v.currency }}
      </app-sweep-button>
    </div>
  </div>

  <!-- Conversion Modal -->
  <app-conversion-modal
    *ngIf="conversionVault"
    [vault]="conversionVault"
    (close)="closeConversion()"
  ></app-conversion-modal>
</div>
